<div class="container">
    <form [formGroup]="changePwForm" (ngSubmit)="onSubmit()" class="max-w-5xl mx-auto p-6 bg-white shadow-lg rounded-xl mt-10">
      
      <div class="page-header">
        <h1 >Change Password</h1>
        <p class="sub-header">Update your login password</p>
      </div>

      <!-- Credentials Section - readonly -->
      <section class="mb-8 border-l-4 border-green-500 pl-4">
        <h2 class="text-2xl font-semibold text-green-700 mb-4">Current Credentials</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Email</mat-label>
            <input matInput formControlName="username" type="email" placeholder="name@example.com" required class="read-only-textbx" [readonly]="true">
          </mat-form-field>
  
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Password</mat-label>
            <input matInput formControlName="oldPassword" type="password" placeholder="********" required>
          </mat-form-field>
        </div>
      </section>

      <!-- updated password -->
      <section class="mb-8 border-l-4 border-purple-500 pl-4">
        <h2 class="text-2xl font-semibold text-purple-700 mb-4">Updated Credentials</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <mat-form-field appearance="outline" class="w-full">
                <mat-label>New Password</mat-label>
                <input matInput formControlName="newPassword" type="password" placeholder="********" required>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-full">
                <mat-label>New Password Confirmed</mat-label>
                <input matInput formControlName="confirmPassword" type="password" placeholder="********" required>
            </mat-form-field>
        </div>
      </section>

        <!-- Validation Errors -->
        @if (validationErrors)
        {
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6">
            <strong class="font-semibold">Please fix the following:</strong>
            <ul class="list-disc pl-5 mt-2">
            @for (error of validationErrors; track $index) {
                <li>{{ error }}</li>
            }
            </ul>
        </div>
        }

        <!-- Buttons -->
        <div class="flex justify-end space-x-3 mt-6">
        <button mat-stroked-button type="button" (click)="clearForm()" class="text-gray-700 border-gray-500">
            Reset
        </button>
        <button mat-flat-button color="primary" type="submit" [disabled]="changePwForm.invalid">
            Update
        </button>
        </div>
    </form>
</div>